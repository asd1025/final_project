<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cart">

    <insert id="insert" parameterType="cartvo"  >
        <![CDATA[
			insert into cart (id, quantity, stock_no) values
			(#{id},#{quantity},#{stockNo})
		]]>
    </insert>

   <select id="getList"  parameterType="String"  resultType="cartvo">
		<![CDATA[
			select  no,id,quantity,c.stock_no as stockNo, update_date as updateDate,s.final_option as finalOption
			,s.product_name as productName, s.thumb_img as thumbImg
			from cart c, stock s
			where c.stock_no=s.stock_no and c.id=#{value}
		]]>
	</select>
	<select id="getCartByIdAndStockNo"  parameterType="cartvo"  resultType="cartvo">
		<![CDATA[
			select  no,id,quantity,c.stock_no as stockNo, update_date as updateDate,s.final_option as finalOption
			,s.product_name as productName, s.thumb_img as thumbImg
			from cart c, stock s
			where c.stock_no=s.stock_no and c.id=#{id} and c.stock_no=#{stockNo}
		]]>
	</select>
	<delete id="deleteCartByNo"  parameterType="map">
		<![CDATA[ delete from cart where id=#{id} and stock_no=#{stockNo} ]]>
	</delete>
	<delete id="deleteAllCartById"  parameterType="string">
		<![CDATA[ delete from cart where id=#{value} ]]>
	</delete>
	<update id="update" parameterType="cartvo">
		<![CDATA[ update cart set quantity = #{quantity} where no=#{no}  ]]>
	</update>


	<!--
        <select id="login" parameterType="uservo"  resultType="uservo">
            <![CDATA[
            select id,  AES_DECRYPT(UNHEX(name),sha1(#{name})) name
            , AES_DECRYPT(UNHEX(phone),sha1(#{phone})) phone
            ,AES_DECRYPT(UNHEX(email),sha1(#{email})) email
            ,birth,refundaccount as refundAccount
            ,membership_status as membershipStatus, joindate as joinDate
            from member where id=#{id} and password=sha1(#{password})
            ]]>
        </select>-->

    <!--
    <select id="getByEmailAndPassword" resultType="uservo" parameterType='map'>
		<![CDATA[
		select no, name
		  from user
		 where email=#{email }
		   and password=#{password }
		]]>
	</select>

    <update id="update" parameterType="uservo">
        <![CDATA[
		update user
		   set name = #{name },
		]]>
        <if test="password != ''">
            <![CDATA[
			password=#{password },
			]]>
        </if>
        <![CDATA[
		       gender = #{gender }

		 where no = #{no }
		]]>
    </update>-->
</mapper>
